<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
    </script>
</head>

<body>
  <h3>Books</h3>
  <input type="text" id="bookName">
  <input type="text" id="year">
  <input type="text" id="bookId">
  <button id="saveBook">Save book</button>
  <button id="updateBook">Update book</button>
  <button id="deleteBook">Delete book</button>
  <hr>
  <button id="getAllBooks">Get All Books</button>

  <script>
    let bookName = $('#bookName')
    let year = $('#year')
    let saveBook = $('#saveBook')
    saveBook.on("click", function () {
      $.ajax({
        url: 'http://localhost:3000/api2/saveBook',
        method: 'POST',
        data: {
          name: bookName.val(),
          year: year.val(),
        },
        success: function (msg) {
          console.log(msg)
        }
      })
    })
    let getAllBooks = $('#getAllBooks')
    getAllBooks.on("click", function () {
      $.ajax({
        url: 'http://localhost:3000/api2/getAllBooks',
        method: 'GET',
        success: function (books) {
          console.log(books)
        }
      })
    })

    let bookId = $('#bookId')
    let updateBook = $('#updateBook')
    updateBook.on("click", function () {
      $.ajax({
        url: 'http://localhost:3000/api2/updateBook/' + bookId.val(),
        method: 'PATCH',
        data: {
          name: bookName.val(),
          year: year.val(),
        },
        success: function (msg) {
          console.log(msg)
        }
      })
    })

    let deleteBook = $('#deleteBook')
    deleteBook.on("click", function () {
      $.ajax({
        url: 'http://localhost:3000/api2/deleteBook/' + bookId.val(),
        method: 'DELETE',
        success: function (msg) {
          console.log(msg)
        }
      })
    })
  </script>
</body>

</html>